<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:pageModels="clr-namespace:NotesCommander.PageModels"
             xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
             x:Class="NotesCommander.Pages.SettingsPage"
             x:DataType="pageModels:SettingsPageModel"
             x:Name="Page"
             Title="ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸">

    <ContentPage.Resources>
        <ResourceDictionary>
            <toolkit:InvertedBoolConverter x:Key="InvertedBoolConverter" />
        </ResourceDictionary>
    </ContentPage.Resources>

    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="24">
            
            <!-- Ð¡Ñ‚Ð°Ñ‚ÑƒÑ Ñ€Ð°Ð·Ñ€ÐµÑˆÐµÐ½Ð¸Ð¹ -->
            <Border Style="{StaticResource CardStyle}"
                    Padding="20">
                <VerticalStackLayout Spacing="12">
                    <Label Text="Ð¡Ñ‚Ð°Ñ‚ÑƒÑ Ñ€Ð°Ð·Ñ€ÐµÑˆÐµÐ½Ð¸Ð¹"
                           Style="{StaticResource Title3}" />
                    <Label Text="{Binding PermissionsStatusText}"
                           TextColor="{AppThemeBinding Light={StaticResource Primary600}, Dark={StaticResource Primary200}}"
                           FontAttributes="Bold" />
                </VerticalStackLayout>
            </Border>

            <!-- Ð Ð°Ð·Ñ€ÐµÑˆÐµÐ½Ð¸Ñ -->
            <VerticalStackLayout Spacing="16">
                <Label Text="Ð Ð°Ð·Ñ€ÐµÑˆÐµÐ½Ð¸Ñ"
                       Style="{StaticResource Title2}" />

                <!-- ÐœÐ¸ÐºÑ€Ð¾Ñ„Ð¾Ð½ -->
                <Border Style="{StaticResource CardStyle}"
                        Padding="20">
                    <Grid RowDefinitions="Auto,Auto,Auto"
                          RowSpacing="12">
                        <HorizontalStackLayout Grid.Row="0"
                                               Spacing="12">
                            <Label Text="ðŸŽ¤"
                                   FontSize="24"
                                   VerticalOptions="Center" />
                            <VerticalStackLayout Spacing="4"
                                                 VerticalOptions="Center">
                                <Label Text="Ð”Ð¾ÑÑ‚ÑƒÐ¿ Ðº Ð¼Ð¸ÐºÑ€Ð¾Ñ„Ð¾Ð½Ñƒ"
                                       FontAttributes="Bold"
                                       FontSize="16" />
                                <Label Text="Ð”Ð»Ñ Ð·Ð°Ð¿Ð¸ÑÐ¸ Ð³Ð¾Ð»Ð¾ÑÐ¾Ð²Ñ‹Ñ… Ð·Ð°Ð¼ÐµÑ‚Ð¾Ðº"
                                       TextColor="{StaticResource Gray400}"
                                       FontSize="12" />
                            </VerticalStackLayout>
                        </HorizontalStackLayout>

                        <Label Grid.Row="1"
                               Text="{Binding MicrophonePermissionStatus}"
                               TextColor="{AppThemeBinding Light={StaticResource Primary600}, Dark={StaticResource Primary200}}"
                               FontSize="14" />

                        <Button Grid.Row="2"
                                Text="Ð—Ð°Ð¿Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ Ñ€Ð°Ð·Ñ€ÐµÑˆÐµÐ½Ð¸Ðµ"
                                Command="{Binding RequestMicrophonePermissionCommand}"
                                HeightRequest="44"
                                IsEnabled="{Binding HasMicrophonePermission, Converter={StaticResource InvertedBoolConverter}}" />
                    </Grid>
                </Border>

                <!-- ÐœÐµÐ´Ð¸Ð° (Ð¤Ð¾Ñ‚Ð¾/ÐšÐ°Ð¼ÐµÑ€Ð°) -->
                <Border Style="{StaticResource CardStyle}"
                        Padding="20">
                    <Grid RowDefinitions="Auto,Auto,Auto"
                          RowSpacing="12">
                        <HorizontalStackLayout Grid.Row="0"
                                               Spacing="12">
                            <Label Text="ðŸ“·"
                                   FontSize="24"
                                   VerticalOptions="Center" />
                            <VerticalStackLayout Spacing="4"
                                                 VerticalOptions="Center">
                                <Label Text="Ð”Ð¾ÑÑ‚ÑƒÐ¿ Ðº Ñ„Ð¾Ñ‚Ð¾ Ð¸ ÐºÐ°Ð¼ÐµÑ€Ðµ"
                                       FontAttributes="Bold"
                                       FontSize="16" />
                                <Label Text="Ð”Ð»Ñ Ð¿Ñ€Ð¸ÐºÑ€ÐµÐ¿Ð»ÐµÐ½Ð¸Ñ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¹ Ðº Ð·Ð°Ð¼ÐµÑ‚ÐºÐ°Ð¼"
                                       TextColor="{StaticResource Gray400}"
                                       FontSize="12" />
                            </VerticalStackLayout>
                        </HorizontalStackLayout>

                        <Label Grid.Row="1"
                               Text="{Binding MediaPermissionStatus}"
                               TextColor="{AppThemeBinding Light={StaticResource Primary600}, Dark={StaticResource Primary200}}"
                               FontSize="14" />

                        <Button Grid.Row="2"
                                Text="Ð—Ð°Ð¿Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ Ñ€Ð°Ð·Ñ€ÐµÑˆÐµÐ½Ð¸Ðµ"
                                Command="{Binding RequestMediaPermissionCommand}"
                                HeightRequest="44"
                                IsEnabled="{Binding HasMediaPermission, Converter={StaticResource InvertedBoolConverter}}" />
                    </Grid>
                </Border>

                <!-- Ð—Ð°Ð¿Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ Ð²ÑÐµ Ñ€Ð°Ð·Ñ€ÐµÑˆÐµÐ½Ð¸Ñ -->
                <Button Text="Ð—Ð°Ð¿Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ Ð²ÑÐµ Ñ€Ð°Ð·Ñ€ÐµÑˆÐµÐ½Ð¸Ñ"
                        Command="{Binding RequestAllPermissionsCommand}"
                        HeightRequest="48"
                        BackgroundColor="{AppThemeBinding Light={StaticResource Primary600}, Dark={StaticResource Primary200}}"
                        TextColor="White" />
            </VerticalStackLayout>

            <!-- ÐžÑ‚Ð»Ð°Ð´ÐºÐ° -->
            <VerticalStackLayout Spacing="16">
                <Label Text="ÐžÑ‚Ð»Ð°Ð´ÐºÐ°"
                       Style="{StaticResource Title2}" />
                
                <Button Text="Ð¡Ð±Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ Ð´ÐµÐ¼Ð¾-Ð´Ð°Ð½Ð½Ñ‹Ðµ"
                        Command="{Binding ResetSeedDataCommand}"
                        HeightRequest="48"
                        BackgroundColor="{AppThemeBinding Light={StaticResource Orange600}, Dark={StaticResource Orange400}}"
                        TextColor="White" />
            </VerticalStackLayout>

            <!-- Ð˜Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð¾ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ð¸ -->
            <Border Style="{StaticResource CardStyle}"
                    Padding="20">
                <VerticalStackLayout Spacing="12">
                    <Label Text="Ðž Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ð¸"
                           Style="{StaticResource Title3}" />
                    <Grid ColumnDefinitions="Auto,*"
                          ColumnSpacing="12"
                          RowDefinitions="Auto,Auto"
                          RowSpacing="8">
                        <Label Grid.Row="0"
                               Grid.Column="0"
                               Text="Ð’ÐµÑ€ÑÐ¸Ñ:"
                               TextColor="{StaticResource Gray400}" />
                        <Label Grid.Row="0"
                               Grid.Column="1"
                               Text="1.0.0" />
                        
                        <Label Grid.Row="1"
                               Grid.Column="0"
                               Text="ÐŸÐ»Ð°Ñ‚Ñ„Ð¾Ñ€Ð¼Ð°:"
                               TextColor="{StaticResource Gray400}" />
                        <Label Grid.Row="1"
                               Grid.Column="1"
                               Text="{Binding Source={x:Static DeviceInfo.Platform}}" />
                    </Grid>
                </VerticalStackLayout>
            </Border>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
