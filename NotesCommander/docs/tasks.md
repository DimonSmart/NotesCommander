# План работ по NotesCommander

## 1. Заменить интерфейс задач на интерфейс голосовых заметок
Существующие страницы и модели данных ориентированы на проекты и задачи. Требуется перепроектировать UI под сбор голосовых заметок с фото, статусами и категориями.

:::task-stub{title="Заменить интерфейс задач на интерфейс голосовых заметок"}
Перепроектируйте `Pages/MainPage.xaml`, чтобы отображать список локальных голосовых заметок (название, длительность, статус распознавания, ярлык категории, превью фото) и добавить кнопку «Добавить голосовую заметку».  
В `PageModels/MainPageModel.cs` замените зависимости от репозиториев задач/проектов на сервис заметок и добавьте команды: запрос разрешений, запуск/остановка записи микрофона, вызов `MediaPicker`/камеры для фото, сохранение метаданных (привязка к UI).  
Создайте компонент/страницу (например, `Pages/NoteCapturePage`) для записи аудио и добавления нескольких фото, возвращающую заполненную модель заметки в `MainPageModel`.
:::

## 2. Спроектировать локальную БД для голосовых заметок
Локальная SQLite-база содержит только таблицы задач, поэтому необходимо добавить модели и репозитории для заметок, фото и тегов.

:::task-stub{title="Спроектировать локальную БД для голосовых заметок"}
Добавьте модели в `Models/` (например, `VoiceNote`, `VoiceNotePhoto`, `VoiceNoteTag`) с полями: локальный ID, путь к аудио, продолжительность, массив фото, текст (оригинальный/распознанный), категория, список тегов, статус синхронизации, идентификатор сервера, временные метки.  
Создайте репозитории/сервисы в `Data/` (например, `VoiceNoteRepository`) для создания таблиц SQLite, CRUD-операций и обновления статусов. Храните пути к медиафайлам в `FileSystem.AppDataDirectory`.  
Обновите `SeedDataService`, DI в `MauiProgram` и все page models, чтобы они использовали новый репозиторий вместо `ProjectRepository`/`TaskRepository`.
:::

## 3. Добавить серверную заглушку и сервис синхронизации
В решении отсутствует бэкенд и механизм синхронизации заметок, поэтому требуется ввести соответствующие проекты и сервисы.

:::task-stub{title="Добавить серверную заглушку и сервис синхронизации"}
Создайте ASP.NET Core бэкенд (например, `NotesCommander.Backend`) с простым хранилищем: `POST /notes` для загрузки заметки, `POST /notes/{id}/recognize` для запуска задач, `GET /notes/{id}` для статусов и фоновой `IHostedService`, который симулирует распознавание/категоризацию. Подключите проект к `NotesCommander.slnx` и опишите его в `AppHost` через `builder.AddProject<Projects.NotesCommanderBackend>(...)`.  
На мобильной стороне добавьте `Services/NoteSyncService` с очередью несинхронизированных заметок: отслеживайте `Connectivity.Current`, при появлении сети загружайте аудио/фото через HTTP, создавайте задачи распознавания и периодически опрашивайте API для обновления текста/категории.  
Интегрируйте сервис синхронизации в `MauiProgram` (singleton + фоновые задачи) и обновите модель заметки для статусов «в очереди», «распознаётся», «готово», «ошибка».
:::

## 4. Настроить документацию проекта
Нужен отдельный Markdown-файл, который описывает назначение приложения, структуру решений (MAUI-приложение, AppHost, ServiceDefaults, будущий бэкенд) и их взаимодействие.

:::task-stub{title="Создать документацию проекта"}
Создайте папку `docs/` (если отсутствует) и добавьте туда файл `PROJECT_OVERVIEW.md` с описанием: цели приложения, жизненный цикл заметки (запись → локальное хранение → синхронизация → распознавание), структура решений и основные каталоги кода.  
Опишите требования к среде разработки (Visual Studio 2026, .NET SDK), способ запуска мобильной части и бэкенда.  
Согласуйте формат документа с остальными участками документации и обновляйте его по мере добавления функциональности.
:::
